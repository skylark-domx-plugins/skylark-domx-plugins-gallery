{"version":3,"sources":["items/vimeo.js"],"names":["define","langx","noder","$","EmbedVimeo","Gallery","video","counter","VimeoItemFactory","ctor","inherit","klassName","options","vimeoVideoIdProperty","vimeoPlayerUrl","vimeoPlayerIdPrefix","vimeoClickToPlay","initOptions","this","overrided","mixin","prototype","render","obj","callback","videoId","getItemProperty","undefined","urlProperty","createElement","url","playerId","clickToPlay","pluginInfo","name","mimeType","installAddon"],"mappings":";;;;;;;AAAAA,QACE,sBACA,qBACA,qBACA,0CACA,aACA,WACC,SAAUC,EAAOC,EAAOC,EAAEC,EAAYC,EAASC,GAChD,aAEA,IAAIC,EAAU,EAEVC,EAAmBF,EAAMG,KAAKC,SAChCC,UAAW,mBAIXC,SAEEC,qBAAsB,QAGtBC,eAAgB,8DAEhBC,oBAAqB,gBAErBC,kBAAkB,GAGpBC,YAAa,SAAUL,GACrBM,KAAKC,YACLD,KAAKN,QAAUX,EAAMmB,MAAMF,KAAKN,QAASJ,EAAiBa,UAAUT,QAASA,IAG/EU,OAAQ,SAAUC,EAAKC,GACrB,IAAIZ,EAAUM,KAAKN,QACfa,EAAUP,KAAKQ,gBAAgBH,EAAKX,EAAQC,sBAChD,GAAIY,EAKF,YAJuDE,IAAnDT,KAAKQ,gBAAgBH,EAAKX,EAAQgB,eACpCL,EAAIX,EAAQgB,aAAe,eAAiBH,GAE9ClB,GAAW,EACJW,KAAKC,UACVI,EACAC,EACA,IAAIpB,EACFF,EAAM2B,cAAc,QAElBC,IAAMlB,EAAQE,eACdW,QAAAA,EACAM,SAAWnB,EAAQG,oBAAsBR,EACzCyB,YAAcpB,EAAQI,uBAQ9BiB,GACFC,KAAM,QACNC,SAAU,QACV1B,KAAMD,GAKR,OAFAH,EAAQ+B,aAAa,QAASH,GAEvBA","file":"../../items/vimeo.js","sourcesContent":["define([\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-noder\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-plugins-embeds/embed-vimeo\",\r\n  '../Gallery',\r\n  './video'\r\n], function (langx, noder, $,EmbedVimeo, Gallery, video) {\r\n  'use strict'\r\n\r\n  var counter = 0;\r\n\r\n  var VimeoItemFactory = video.ctor.inherit({\r\n    klassName: \"VimeoItemFactory\",\r\n\r\n    ///VimeoPlayer: VimeoPlayer,\r\n\r\n    options: {\r\n      // The list object property (or data attribute) with the Vimeo video id:\r\n      vimeoVideoIdProperty: 'vimeo',\r\n      // The URL for the Vimeo video player, can be extended with custom parameters:\r\n      // https://developer.vimeo.com/player/embedding\r\n      vimeoPlayerUrl: '//player.vimeo.com/video/VIDEO_ID?api=1&player_id=PLAYER_ID',\r\n      // The prefix for the Vimeo video player ID:\r\n      vimeoPlayerIdPrefix: 'vimeo-player-',\r\n      // Require a click on the native Vimeo player for the initial playback:\r\n      vimeoClickToPlay: true\r\n    },\r\n\r\n    initOptions: function (options) {\r\n      this.overrided();\r\n      this.options = langx.mixin(this.options, VimeoItemFactory.prototype.options, options);\r\n    },\r\n\r\n    render: function (obj, callback) {\r\n      var options = this.options\r\n      var videoId = this.getItemProperty(obj, options.vimeoVideoIdProperty)\r\n      if (videoId) {\r\n        if (this.getItemProperty(obj, options.urlProperty) === undefined) {\r\n          obj[options.urlProperty] = '//vimeo.com/' + videoId\r\n        }\r\n        counter += 1;\r\n        return this.overrided(\r\n          obj,\r\n          callback,\r\n          new EmbedVimeo(\r\n            noder.createElement(\"div\"),\r\n            {\r\n              url : options.vimeoPlayerUrl,\r\n              videoId,\r\n              playerId : options.vimeoPlayerIdPrefix + counter,\r\n              clickToPlay : options.vimeoClickToPlay\r\n            }\r\n          )\r\n        )\r\n      }\r\n    }\r\n  });\r\n\r\n  var pluginInfo = {\r\n    name: \"vimeo\",\r\n    mimeType: \"vimeo\",\r\n    ctor: VimeoItemFactory\r\n  };\r\n\r\n  Gallery.installAddon(\"items\", pluginInfo);\r\n\r\n  return pluginInfo;\r\n\r\n});"]}