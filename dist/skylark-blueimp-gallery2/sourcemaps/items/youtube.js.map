{"version":3,"sources":["items/youtube.js"],"names":["define","langx","noder","$","EmbedYoutube","Gallery","video","YouTubeItemFactory","ctor","inherit","klassName","options","youTubeVideoIdProperty","youTubePlayerVars","wmode","youTubeClickToPlay","initOptions","this","overrided","mixin","prototype","render","obj","callback","videoId","getItemProperty","undefined","urlProperty","videoPosterProperty","createElement","playerVars","clickToPlay","pluginInfo","name","mimeType","installAddon"],"mappings":";;;;;;;AAAAA,QACE,sBACA,qBACA,qBACA,4CACA,aACA,WACC,SAAUC,EAAOC,EAAOC,EAAGC,EAAaC,EAASC,GAClD,aAGA,IAAIC,EAAqBD,EAAME,KAAKC,SAClCC,UAAW,qBAIXC,SAEEC,uBAAwB,UAGxBC,mBACEC,MAAO,eAGTC,oBAAoB,GAGtBC,YAAa,SAAUL,GACrBM,KAAKC,YACLD,KAAKN,QAAUV,EAAMkB,MAAMF,KAAKN,QAASJ,EAAmBa,UAAUT,QAASA,IAGjFU,OAAQ,SAAUC,EAAKC,GACrB,IAAIZ,EAAUM,KAAKN,QACfa,EAAUP,KAAKQ,gBAAgBH,EAAKX,EAAQC,wBAChD,GAAIY,EAUF,YATuDE,IAAnDT,KAAKQ,gBAAgBH,EAAKX,EAAQgB,eACpCL,EAAIX,EAAQgB,aAAe,6BAA+BH,QAGCE,IAA3DT,KAAKQ,gBAAgBH,EAAKX,EAAQiB,uBAElCN,EAAIX,EAAQiB,qBACV,wBAA0BJ,EAAU,sBAEjCP,KAAKC,UACVI,EACAC,EACA,IAAInB,EACFF,EAAM2B,cAAc,QAElBL,QAAAA,EACAM,WAAanB,EAAQE,kBACrBkB,YAAcpB,EAAQI,yBAQ9BiB,GACFC,KAAM,UACNC,SAAU,UACV1B,KAAMD,GAKR,OAFAF,EAAQ8B,aAAa,QAASH,GAEvBA","file":"../../items/youtube.js","sourcesContent":["define([\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-noder\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-plugins-embeds/embed-youtube\",\r\n  '../Gallery',\r\n  './video'\r\n], function (langx, noder, $, EmbedYoutube,Gallery, video) {\r\n  'use strict'\r\n\r\n\r\n  var YouTubeItemFactory = video.ctor.inherit({\r\n    klassName: \"YouTubeItemFactory\",\r\n\r\n    ///YouTubePlayer: YouTubePlayer,\r\n\r\n    options: {\r\n      // The list object property (or data attribute) with the YouTube video id:\r\n      youTubeVideoIdProperty: 'youtube',\r\n      // Optional object with parameters passed to the YouTube video player:\r\n      // https://developers.google.com/youtube/player_parameters\r\n      youTubePlayerVars: {\r\n        wmode: 'transparent'\r\n      },\r\n      // Require a click on the native YouTube player for the initial playback:\r\n      youTubeClickToPlay: true\r\n    },\r\n\r\n    initOptions: function (options) {\r\n      this.overrided();\r\n      this.options = langx.mixin(this.options, YouTubeItemFactory.prototype.options, options);\r\n    },\r\n\r\n    render: function (obj, callback) {\r\n      var options = this.options\r\n      var videoId = this.getItemProperty(obj, options.youTubeVideoIdProperty)\r\n      if (videoId) {\r\n        if (this.getItemProperty(obj, options.urlProperty) === undefined) {\r\n          obj[options.urlProperty] = '//www.youtube.com/watch?v=' + videoId\r\n        }\r\n        if (\r\n          this.getItemProperty(obj, options.videoPosterProperty) === undefined\r\n        ) {\r\n          obj[options.videoPosterProperty] =\r\n            '//img.youtube.com/vi/' + videoId + '/maxresdefault.jpg'\r\n        }\r\n        return this.overrided(\r\n          obj,\r\n          callback,\r\n          new EmbedYoutube(\r\n            noder.createElement(\"div\"),\r\n            {\r\n              videoId,\r\n              playerVars : options.youTubePlayerVars,\r\n              clickToPlay : options.youTubeClickToPlay\r\n            }\r\n          )\r\n        )\r\n      }\r\n    }\r\n  });\r\n\r\n  var pluginInfo = {\r\n    name: \"youtube\",\r\n    mimeType: \"youtube\",\r\n    ctor: YouTubeItemFactory\r\n  };\r\n\r\n  Gallery.installAddon(\"items\", pluginInfo);\r\n\r\n  return pluginInfo;\r\n});"]}