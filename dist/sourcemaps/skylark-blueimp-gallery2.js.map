{"version":3,"sources":["skylark-blueimp-gallery2.js"],"names":["define","skylark","langx","noder","plugins","registry","views","items","Gallery","Plugin","inherit","klassName","pluginName","options","typeProperty","titleProperty","altTextProperty","urlProperty","srcsetProperty","_construct","el","this","overrided","$el","$","_elm","_itemFactories","setViewMode","view","mode","viewMode","i","length","name","ctor","getItemUrl","item","getItemProperty","getItemTitle","addItems","concat","Array","prototype","slice","call","num","trigger","renderItem","callback","type","split","factory","mimeType","Error","element","render","srcset","setAttribute","isRunnable","playItem","mixin","getNestedProperty","obj","property","replace","str","singleQuoteProp","doubleQuoteProp","arrayIndex","dotProp","prop","parseInt","getDataProperty","key","dataset","_","b","toUpperCase","getAttribute","toLowerCase","test","parseJSON","ignore","undefined","ViewBase","Evented","controlsClass","fullScreen","init","gallery","hasControls","that","initOptions","container","on","e","hasClass","removeClass","addClass","close","register","ItemFactoryBase","setTimeout","func","args","wait","window","apply","installAddon","pointer","setting","addons","push","attach","q","extend","ImageItemFactory","stretchImages","called","title","altText","img","createElement","url","backgroundSize","draggable","alt","callbackWrapper","event","target","off","style","background","src","pluginInfo","eventer","VideoItemFactory","videoContentClass","videoLoadingClass","videoPlayingClass","videoPosterProperty","videoSourcesProperty","handleSlide","index","playingVideo","pause","videoInterface","posterImage","source","playMediaControl","isLoading","videoContainerNode","videoContainer","errorArgs","video","document","posterUrl","sources","canPlayType","shift","poster","toggleClass","appendChild","href","controls","seeking","interval","play","clearTimeout","timeout","stop","elm","EmbedVimeo","counter","VimeoItemFactory","vimeoVideoIdProperty","vimeoPlayerUrl","vimeoPlayerIdPrefix","vimeoClickToPlay","videoId","playerId","clickToPlay","EmbedYoutube","YouTubeItemFactory","youTubeVideoIdProperty","youTubePlayerVars","wmode","youTubeClickToPlay","playerVars","SliderView","slidesContainer","titleElement","displayClass","singleClass","leftEdgeClass","rightEdgeClass","playingClass","slideClass","slideLoadingClass","slideErrorClass","slideContentClass","prevClass","nextClass","closeClass","playPauseClass","displayTransition","clearSlides","toggleControlsOnReturn","toggleControlsOnSlideClick","toggleSlideshowOnSpace","enableKeyboardNavigation","closeOnEscape","closeOnSlideClick","closeOnSwipeUpOrDown","emulateTouchEvents","stopTouchEventsPropagation","hidePageScrollbars","disableScroll","carousel","continuous","unloadElements","startSlideshow","slideshowInterval","preloadRange","transitionSpeed","slideshowTransitionSpeed","onopen","onopened","onslide","onslideend","onslidecomplete","onclose","onclosed","console","log","support","touch","ontouchstart","DocumentTouch","transitions","webkitTransition","end","prefix","MozTransition","OTransition","transition","hasOwnProperty","elementTests","translateZ","body","getComputedStyle","getPropertyValue","transform","translate","contain","cover","removeChild","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","cancelAnimationFrame","webkitCancelRequestAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","list","initStartIndex","initWidget","initEventListeners","ontransitionend","slide","to","speed","direction","naturalDirection","diff","circle","Math","abs","positions","slideWidth","move","animate","getIndex","getNumber","prev","next","time","elements","animationFrameId","add","addSlide","positionSlide","initSlides","resetSlides","empty","unloadAllSlides","slides","handleClose","destroyEventListeners","display","overflow","bodyOverflowStyle","closeHandler","dist","translateX","x","y","translateY","from","start","Date","getTime","timer","setInterval","timeElap","left","clearInterval","floor","preventDefault","returnValue","stopPropagation","cancelBubble","onresize","onmousedown","which","nodeName","originalEvent","touches","pageX","pageY","onmousemove","touchStart","ontouchmove","onmouseup","ontouchend","onmouseout","related","relatedTarget","contains","now","isScrolling","touchDelta","touchDeltaX","indices","scale","unshift","pop","indexForward","indexBackward","distanceForward","distanceBackward","isShortDuration","Number","isValidSlide","isPastBounds","isValidClose","slideHeight","ontouchcancel","oncomplete","srcElement","parent","parentNode","getNodeIndex","clientHeight","maxHeight","onload","onerror","onkeydown","keyCode","toggleControls","stopImmediatePropagation","toggleSlideshow","handleClick","isTarget","className","onclick","updateEdgeClasses","loadElements","setTitle","firstChild","text","createTextNode","loadElement","proxyListener","limit","min","j","unloadSlide","slidePrototype","cloneNode","width","reload","imagePrototype","elementPrototype","children","clientWidth","len","handleOpen","find","first","openHandler","templates","default","CarouselView","LightBoxView","indicatorContainer","activeIndicatorClass","thumbnailProperty","thumbnailIndicators","createIndicator","thumbnailUrl","thumbnail","indicator","indicatorPrototype","getElementsByTagName","backgroundImage","addIndicator","indicators","setActiveIndicator","activeIndicator","main"],"mappings":"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","file":"../skylark-blueimp-gallery2.js","sourcesContent":["define('skylark-blueimp-gallery2/Gallery',[\r\n\t\"skylark-langx/skylark\",\r\n\t\"skylark-langx/langx\",\r\n\t\"skylark-domx-noder\",\r\n\t\"skylark-domx-plugins-base\"\r\n], function (skylark,langx,noder,plugins) {\r\n\tvar registry = {\r\n\t\tviews: [],\r\n\t\titems: []\r\n\t};\r\n\tvar Gallery = plugins.Plugin.inherit({\r\n\t\tklassName: \"Gallery\",\r\n\t    pluginName : \"blueimp.gallery\",\r\n\r\n\t\toptions: {\r\n\t\t\t// The list object property (or data attribute) with the object type:\r\n\t\t\ttypeProperty: 'type',\r\n\t\t\t// The list object property (or data attribute) with the object title:\r\n\t\t\ttitleProperty: 'title',\r\n\t\t\t// The list object property (or data attribute) with the object alt text:\r\n\t\t\taltTextProperty: 'alt',\r\n\t\t\t// The list object property (or data attribute) with the object URL:\r\n\t\t\turlProperty: 'href',\r\n\t\t\t// The list object property (or data attribute) with the object srcset URL(s):\r\n\t\t\tsrcsetProperty: 'urlset',\r\n\t\t},\r\n\t\t\r\n\t\t/*\r\n\t\t * @param {Element} el The container element. \r\n\t\t */\r\n\t\t//init: function (el, options) {\r\n\t\t_construct : function(el,options) {\r\n\t\t\tthis.overrided(el,options);\r\n\t\t\t//this.overrided(el,options);\t\r\n\t\t\tthis.$el = this.$(); // $(el);\r\n\t\t\tthis.el = this._elm;\r\n\t\t\t//this.options = langx.mixin({}, Gallery.prototype.options, options);\r\n\t\t\tthis._itemFactories = {\r\n\r\n\t\t\t};\r\n\t\t\tthis.items = this.options.items;\r\n\t\t\tthis.setViewMode(this.options.view.mode, this.options.view.options);\r\n\t\t},\r\n\r\n\t\tsetViewMode: function (mode, options) {\r\n\t\t\tthis.viewMode = mode;\r\n\t\t\tfor (var i = 0; i < registry.views.length; i++) {\r\n\t\t\t\tif (registry.views[i].name === mode) {\r\n\t\t\t\t\tthis.view = new registry.views[i].ctor(this, options);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetItemUrl: function (item) {\r\n\t\t\treturn Gallery.getItemProperty(item, this.options.urlProperty);\r\n\t\t},\r\n\r\n\t\tgetItemTitle: function (item) {\r\n\t\t\treturn Gallery.getItemProperty(item, this.options.titleProperty);\r\n\t\t},\r\n\r\n\t\taddItems: function (items) {\r\n\t\t\tvar i\r\n\t\t\tif (!items.concat) {\r\n\t\t\t\t// Make a real array out of the items to add:\r\n\t\t\t\titems = Array.prototype.slice.call(items);\r\n\t\t\t}\r\n\t\t\tif (!this.items.concat) {\r\n\t\t\t\t// Make a real array out of the Gallery items:\r\n\t\t\t\tthis.items = Array.prototype.slice.call(this.items);\r\n\t\t\t}\r\n\t\t\tthis.items = this.items.concat(items);\r\n\t\t\tthis.num = this.items.length;\r\n\t\t\tthis.trigger(\"itemsChanged\");\r\n\t\t},\r\n\r\n\t\trenderItem: function (item, callback) {\r\n\t\t\tvar type = item && Gallery.getItemProperty(item, this.options.typeProperty);\r\n\r\n\t\t\tif (type) {\r\n\t\t\t\ttype = type.split('/')[0];\r\n\t\t\t}\r\n\r\n\t\t\tif (!type) {\r\n\t\t\t\t//throw new Error(\"no type \");\r\n\t\t\t\ttype = \"image\";\r\n\t\t\t}\r\n\r\n\t\t\tvar factory = this._itemFactories[type];\r\n\r\n\t\t\tif (!factory) {\r\n\t\t\t\tfor (var i = 0; i < registry.items.length; i++) {\r\n\t\t\t\t\tif (registry.items[i].mimeType === type) {\r\n\t\t\t\t\t\tfactory = this._itemFactories[type] = new registry.items[i].ctor(this);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!factory) {\r\n\t\t\t\tthrow new Error(\"invalid type:\" + type);\r\n\t\t\t}\r\n\r\n\t\t\tvar element = factory.render(item, callback);\r\n\t\t\tvar srcset = Gallery.getItemProperty(item, this.options.srcsetProperty)\r\n\t\t\tif (srcset) {\r\n\t\t\t\telement.setAttribute('srcset', srcset)\r\n\t\t\t}\r\n\t\t\treturn element;\r\n\t\t},\r\n\r\n\t\t/*\r\n\t\t * Check whether a item is runnable.\r\n\t\t * @param {Object} item The item object\r\n\t\t * @return {Boolean}\r\n\t\t */\r\n\t\tisRunnable: function (item) {\r\n\r\n\t\t},\r\n\r\n\t\tplayItem: function (item) {\r\n\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tlangx.mixin(Gallery, {\r\n\t\tgetNestedProperty: function (obj, property) {\r\n\t\t\tproperty.replace(\r\n\t\t\t\t// Matches native JavaScript notation in a String,\r\n\t\t\t\t// e.g. '[\"doubleQuoteProp\"].dotProp[2]'\r\n\t\t\t\t// eslint-disable-next-line no-useless-escape\r\n\t\t\t\t/\\[(?:'([^']+)'|\"([^\"]+)\"|(\\d+))\\]|(?:(?:^|\\.)([^\\.\\[]+))/g,\r\n\t\t\t\tfunction (str, singleQuoteProp, doubleQuoteProp, arrayIndex, dotProp) {\r\n\t\t\t\t\tvar prop =\r\n\t\t\t\t\t\tdotProp ||\r\n\t\t\t\t\t\tsingleQuoteProp ||\r\n\t\t\t\t\t\tdoubleQuoteProp ||\r\n\t\t\t\t\t\t(arrayIndex && parseInt(arrayIndex, 10))\r\n\t\t\t\t\tif (str && obj) {\r\n\t\t\t\t\t\tobj = obj[prop]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\treturn obj\r\n\t\t},\r\n\r\n\t\tgetDataProperty: function (obj, property) {\r\n\t\t\tvar key\r\n\t\t\tvar prop\r\n\t\t\tif (obj.dataset) {\r\n\t\t\t\tkey = property.replace(/-([a-z])/g, function (_, b) {\r\n\t\t\t\t\treturn b.toUpperCase()\r\n\t\t\t\t})\r\n\t\t\t\tprop = obj.dataset[key]\r\n\t\t\t} else if (obj.getAttribute) {\r\n\t\t\t\tprop = obj.getAttribute(\r\n\t\t\t\t\t'data-' + property.replace(/([A-Z])/g, '-$1').toLowerCase()\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\tif (typeof prop === 'string') {\r\n\t\t\t\t// eslint-disable-next-line no-useless-escape\r\n\t\t\t\tif (\r\n\t\t\t\t\t/^(true|false|null|-?\\d+(\\.\\d+)?|\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$/.test(prop)\r\n\t\t\t\t) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\treturn $.parseJSON(prop)\r\n\t\t\t\t\t} catch (ignore) {}\r\n\t\t\t\t}\r\n\t\t\t\treturn prop\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetItemProperty: function (obj, property) {\r\n\t\t\tvar prop = this.getDataProperty(obj, property)\r\n\t\t\tif (prop === undefined) {\r\n\t\t\t\tprop = obj[property]\r\n\t\t\t}\r\n\t\t\tif (prop === undefined) {\r\n\t\t\t\tprop = this.getNestedProperty(obj, property)\r\n\t\t\t}\r\n\t\t\treturn prop\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tvar ViewBase = Gallery.ViewBase = langx.Evented.inherit({\r\n\t\tklassName: \"ViewBase\",\r\n\r\n\t\toptions: {\r\n\t\t\t// The class to add when the gallery controls are visible:\r\n\t\t\tcontrolsClass: 'skylark-blueimp-gallery-controls',\r\n\t\t\t// Defines if the gallery should open in fullscreen mode:\r\n\t\t\tfullScreen: false\r\n\r\n\t\t},\r\n\r\n\t\tinit: function (gallery, options) {\r\n\t\t\tvar that = this,\r\n\t\t\t\thasControls;\r\n\t\t\tthis.gallery = gallery;\r\n\t\t\tthis.initOptions(options);\r\n\t\t\tif (this.options.fullScreen) {\r\n\t\t\t\tnoder.fullScreen(this.container[0]);\r\n\t\t\t}\r\n\t\t\tthis.gallery.on(\"item.running\", function (e) {\r\n\t\t\t\tif (that.container.hasClass(that.options.controlsClass)) {\r\n\t\t\t\t\thasControls = true\r\n\t\t\t\t\tthat.container.removeClass(that.options.controlsClass);\r\n\t\t\t\t} else {\r\n\t\t\t\t\thasControls = false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.gallery.on(\"item.running\", function (e) {\r\n\t\t\t\tif (hasControls) {\r\n\t\t\t\t\tthat.container.addClass(that.options.controlsClass);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tinitOptions: function (options) {\r\n\t\t\t// Create a copy of the prototype options:\r\n\t\t\tthis.options = langx.mixin({}, ViewBase.prototype.options, options);\r\n\t\t},\r\n\r\n\t\tclose: function () {\r\n\t\t\tif (noder.fullScreen() === this.container[0]) {\r\n\t\t\t\tnoder.fullScreen(false);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n    plugins.register(Gallery);\r\n\r\n\r\n\tvar ItemFactoryBase = Gallery.ItemFactoryBase = langx.Evented.inherit({\r\n\t\tklassName: \"ItemFactoryBase\",\r\n\r\n\t\toptions: {\r\n\t\t\t// The list object property (or data attribute) with the object type:\r\n\t\t\ttypeProperty: 'type',\r\n\t\t\t// The list object property (or data attribute) with the object title:\r\n\t\t\ttitleProperty: 'title',\r\n\t\t\t// The list object property (or data attribute) with the object alt text:\r\n\t\t\taltTextProperty: 'alt',\r\n\t\t\t// The list object property (or data attribute) with the object URL:\r\n\t\t\turlProperty: 'href',\r\n\t\t\t// The list object property (or data attribute) with the object srcset URL(s):\r\n\t\t\tsrcsetProperty: 'urlset',\r\n\t\t},\r\n\r\n\t\tinit: function (gallery, options) {\r\n\t\t\tthis.gallery = gallery;\r\n\t\t\tthis.initOptions(options);\r\n\t\t},\r\n\r\n\t\tinitOptions: function (options) {\r\n\t\t\t// Create a copy of the prototype options:\r\n\t\t\tthis.options = langx.mixin({}, ItemFactoryBase.prototype.options, options);\r\n\t\t},\r\n\r\n\t\tsetTimeout: function (func, args, wait) {\r\n\t\t\tvar that = this\r\n\t\t\treturn (\r\n\t\t\t\tfunc &&\r\n\t\t\t\twindow.setTimeout(function () {\r\n\t\t\t\t\tfunc.apply(that, args || [])\r\n\t\t\t\t}, wait || 0)\r\n\t\t\t)\r\n\t\t},\r\n\r\n\t\tgetNestedProperty: Gallery.getNestedProperty,\r\n\r\n\t\tgetDataProperty: Gallery.getDataProperty,\r\n\r\n\t\tgetItemProperty: Gallery.getItemProperty\r\n\t});\r\n\r\n\tGallery.installAddon = function (pointer, setting) {\r\n\t\tvar addons = registry[pointer];\r\n\t\tif (!addons) {\r\n\t\t\tthrow new Error(\"Invalid paramerter!\");\r\n\t\t}\r\n\t\taddons.push(setting);\r\n\t};\r\n\r\n\treturn skylark.attach(\"domx.plugins.Gallery\", Gallery);\r\n});\n/* global define, window, document */\r\n\r\ndefine('skylark-blueimp-gallery2/helper',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\"\r\n], function (langx, q) {\r\n  'use strict'\r\n  q.extend = langx.mixin;\r\n  return q;\r\n});\ndefine('skylark-blueimp-gallery2/items/image',[\r\n\t\"skylark-langx/langx\",\r\n\t\"skylark-domx-noder\",\r\n\t\"skylark-domx-query\",\r\n\t'../Gallery',\r\n], function (langx, noder, $, Gallery) {\r\n\tvar ImageItemFactory = Gallery.ItemFactoryBase.inherit({\r\n\t\tklassName: \"ImageItemFactory\",\r\n\t\toptions: {\r\n\t\t\t// Defines if images should be stretched to fill the available space,\r\n\t\t\t// while maintaining their aspect ratio (will only be enabled for browsers\r\n\t\t\t// supporting background-size=\"contain\", which excludes IE < 9).\r\n\t\t\t// Set to \"cover\", to make images cover all available space (requires\r\n\t\t\t// support for background-size=\"cover\", which excludes IE < 9):\r\n\t\t\tstretchImages: false\r\n\t\t},\r\n\r\n\t\tinitOptions: function (options) {\r\n\t\t\tthis.overrided();\r\n\t\t\tthis.options = langx.mixin(this.options, ImageItemFactory.prototype.options, options);\r\n\t\t},\r\n\r\n\t\trender: function (obj, callback) {\r\n\t\t\tvar that = this,\r\n\t\t\t\timg = noder.createElement(\"img\"),\r\n\t\t\t\tgallery = this.gallery,\r\n\t\t\t\turl = obj,\r\n\t\t\t\tbackgroundSize = this.options.stretchImages,\r\n\t\t\t\tcalled,\r\n\t\t\t\telement,\r\n\t\t\t\ttitle,\r\n\t\t\t\taltText;\r\n\r\n\t\t\tfunction callbackWrapper(event) {\r\n\t\t\t\tif (!called) {\r\n\t\t\t\t\tevent = {\r\n\t\t\t\t\t\ttype: event.type,\r\n\t\t\t\t\t\ttarget: element\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcalled = true\r\n\t\t\t\t\t$(img).off('load error', callbackWrapper)\r\n\t\t\t\t\tif (backgroundSize) {\r\n\t\t\t\t\t\tif (event.type === 'load') {\r\n\t\t\t\t\t\t\telement.style.background = 'url(\"' + url + '\") center no-repeat'\r\n\t\t\t\t\t\t\telement.style.backgroundSize = backgroundSize\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcallback(event)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (typeof url !== 'string') {\r\n\t\t\t\turl = this.getItemProperty(obj, this.options.urlProperty);\r\n\t\t\t\ttitle = this.getItemProperty(obj, this.options.titleProperty);\r\n\t\t\t\taltText =\r\n\t\t\t\t\tthis.getItemProperty(obj, this.options.altTextProperty) || title;\r\n\t\t\t}\r\n\t\t\tif (backgroundSize === true) {\r\n\t\t\t\tbackgroundSize = 'contain';\r\n\t\t\t}\r\n\t\t\tif (backgroundSize) {\r\n\t\t\t\telement = noder.createElement(\"div\");\r\n\t\t\t} else {\r\n\t\t\t\telement = img;\r\n\t\t\t\timg.draggable = false;\r\n\t\t\t}\r\n\t\t\tif (title) {\r\n\t\t\t\telement.title = title;\r\n\t\t\t}\r\n\t\t\tif (altText) {\r\n\t\t\t\telement.alt = altText;\r\n\t\t\t}\r\n\t\t\t$(img).on('load error', callbackWrapper);\r\n\t\t\timg.src = url\r\n\t\t\treturn element;\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tvar pluginInfo = {\r\n\t\tname: \"image\",\r\n\t\tmimeType: \"image\",\r\n\t\tctor: ImageItemFactory\r\n\t};\r\n\r\n\tGallery.installAddon(\"items\", pluginInfo);\r\n\r\n\treturn pluginInfo;\r\n\r\n});\ndefine('skylark-blueimp-gallery2/items/video',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-noder\",\r\n  \"skylark-domx-eventer\",\r\n  \"skylark-domx-query\",\r\n  '../Gallery',\r\n], function (langx, noder, eventer, $, Gallery) {\r\n\r\n  'use strict'\r\n\r\n  var VideoItemFactory = Gallery.ItemFactoryBase.inherit({\r\n    klassName: \"VideoItemFactory\",\r\n\r\n    options: {\r\n      // The class for video content elements:\r\n      videoContentClass: 'video-content',\r\n      // The class for video when it is loading:\r\n      videoLoadingClass: 'video-loading',\r\n      // The class for video when it is playing:\r\n      videoPlayingClass: 'video-playing',\r\n      // The list object property (or data attribute) for the video poster URL:\r\n      videoPosterProperty: 'poster',\r\n      // The list object property (or data attribute) for the video sources array:\r\n      videoSourcesProperty: 'sources'\r\n    },\r\n\r\n    initOptions: function (options) {\r\n      this.overrided();\r\n      this.options = langx.mixin(this.options, VideoItemFactory.prototype.options, options);\r\n    },\r\n\r\n    handleSlide: function (index) {\r\n      handleSlide.call(this, index)\r\n      if (this.playingVideo) {\r\n        this.playingVideo.pause()\r\n      }\r\n    },\r\n\r\n    render: function (obj, callback, videoInterface) {\r\n      var that = this\r\n      var options = this.options\r\n      var videoContainerNode = noder.createElement(\"div\")\r\n      var videoContainer = $(videoContainerNode)\r\n      var errorArgs = [{\r\n        type: 'error',\r\n        target: videoContainerNode\r\n      }]\r\n      var video = videoInterface || document.createElement('video')\r\n      var url = this.getItemProperty(obj, options.urlProperty)\r\n      var type = this.getItemProperty(obj, options.typeProperty)\r\n      var title = this.getItemProperty(obj, options.titleProperty)\r\n      var altText =\r\n        this.getItemProperty(obj, this.options.altTextProperty) || title\r\n      var posterUrl = this.getItemProperty(obj, options.videoPosterProperty)\r\n      var posterImage\r\n      var sources = this.getItemProperty(obj, options.videoSourcesProperty)\r\n      var source\r\n      var playMediaControl\r\n      var isLoading\r\n      var hasControls\r\n      videoContainer.addClass(options.videoContentClass)\r\n      if (title) {\r\n        videoContainerNode.title = title\r\n      }\r\n      if (video.canPlayType) {\r\n        if (url && type && video.canPlayType(type)) {\r\n          video.src = url\r\n        } else if (sources) {\r\n          while (sources.length) {\r\n            source = sources.shift()\r\n            url = this.getItemProperty(source, options.urlProperty)\r\n            type = this.getItemProperty(source, options.typeProperty)\r\n            if (url && type && video.canPlayType(type)) {\r\n              video.src = url\r\n              break\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (posterUrl) {\r\n        video.poster = posterUrl\r\n        posterImage = noder.createElement(\"img\")\r\n        $(posterImage).addClass(options.toggleClass)\r\n        posterImage.src = posterUrl\r\n        posterImage.draggable = false\r\n        posterImage.alt = altText\r\n        videoContainerNode.appendChild(posterImage)\r\n      }\r\n      playMediaControl = document.createElement('a')\r\n      playMediaControl.setAttribute('target', '_blank')\r\n      if (!videoInterface) {\r\n        playMediaControl.setAttribute('download', title)\r\n      }\r\n      playMediaControl.href = url\r\n      if (video.src) {\r\n        video.controls = true;\r\n        (videoInterface || $(video))\r\n        .on('error', function () {\r\n            that.setTimeout(callback, errorArgs)\r\n          })\r\n          .on('pause', function () {\r\n            if (video.seeking) return\r\n            isLoading = false\r\n            videoContainer\r\n              .removeClass(that.options.videoLoadingClass)\r\n              .removeClass(that.options.videoPlayingClass)\r\n            that.gallery.trigger(\"item.pause\", {\r\n              item: that\r\n            });\r\n            delete that.playingVideo\r\n            if (that.interval) {\r\n              that.play()\r\n            }\r\n          })\r\n          .on('playing', function () {\r\n            isLoading = false\r\n            videoContainer\r\n              .removeClass(that.options.videoLoadingClass)\r\n              .addClass(that.options.videoPlayingClass);\r\n\r\n            that.gallery.trigger(\"item.running\", {\r\n              item: that\r\n            });\r\n          })\r\n          .on('play', function () {\r\n            window.clearTimeout(that.timeout)\r\n            isLoading = true\r\n            videoContainer.addClass(that.options.videoLoadingClass)\r\n            that.playingVideo = video\r\n\r\n            that.gallery.trigger(\"item.run\", {\r\n              item: that\r\n            });\r\n          })\r\n        $(playMediaControl).on('click', function (event) {\r\n          eventer.stop(event)\r\n          if (isLoading) {\r\n            video.pause()\r\n          } else {\r\n            video.play()\r\n          }\r\n        })\r\n        videoContainerNode.appendChild(\r\n          (videoInterface && videoInterface.elm()) || video\r\n        )\r\n      }\r\n      videoContainerNode.appendChild(playMediaControl)\r\n      this.setTimeout(callback, [{\r\n        type: 'load',\r\n        target: videoContainerNode\r\n      }])\r\n      return videoContainerNode\r\n\r\n    }\r\n\r\n\r\n  });\r\n\r\n\r\n  var pluginInfo = {\r\n    name: \"video\",\r\n    mimeType: \"video\",\r\n    ctor: VideoItemFactory\r\n  };\r\n\r\n  Gallery.installAddon(\"items\", pluginInfo);\r\n\r\n  return pluginInfo;\r\n\r\n});\ndefine('skylark-blueimp-gallery2/items/vimeo',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-noder\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-plugins-embeds/embed-vimeo\",\r\n  '../Gallery',\r\n  './video'\r\n], function (langx, noder, $,EmbedVimeo, Gallery, video) {\r\n  'use strict'\r\n\r\n  var counter = 0;\r\n\r\n  var VimeoItemFactory = video.ctor.inherit({\r\n    klassName: \"VimeoItemFactory\",\r\n\r\n    ///VimeoPlayer: VimeoPlayer,\r\n\r\n    options: {\r\n      // The list object property (or data attribute) with the Vimeo video id:\r\n      vimeoVideoIdProperty: 'vimeo',\r\n      // The URL for the Vimeo video player, can be extended with custom parameters:\r\n      // https://developer.vimeo.com/player/embedding\r\n      vimeoPlayerUrl: '//player.vimeo.com/video/VIDEO_ID?api=1&player_id=PLAYER_ID',\r\n      // The prefix for the Vimeo video player ID:\r\n      vimeoPlayerIdPrefix: 'vimeo-player-',\r\n      // Require a click on the native Vimeo player for the initial playback:\r\n      vimeoClickToPlay: true\r\n    },\r\n\r\n    initOptions: function (options) {\r\n      this.overrided();\r\n      this.options = langx.mixin(this.options, VimeoItemFactory.prototype.options, options);\r\n    },\r\n\r\n    render: function (obj, callback) {\r\n      var options = this.options\r\n      var videoId = this.getItemProperty(obj, options.vimeoVideoIdProperty)\r\n      if (videoId) {\r\n        if (this.getItemProperty(obj, options.urlProperty) === undefined) {\r\n          obj[options.urlProperty] = '//vimeo.com/' + videoId\r\n        }\r\n        counter += 1;\r\n        return this.overrided(\r\n          obj,\r\n          callback,\r\n          new EmbedVimeo(\r\n            noder.createElement(\"div\"),\r\n            {\r\n              url : options.vimeoPlayerUrl,\r\n              videoId,\r\n              playerId : options.vimeoPlayerIdPrefix + counter,\r\n              clickToPlay : options.vimeoClickToPlay\r\n            }\r\n          )\r\n        )\r\n      }\r\n    }\r\n  });\r\n\r\n  var pluginInfo = {\r\n    name: \"vimeo\",\r\n    mimeType: \"vimeo\",\r\n    ctor: VimeoItemFactory\r\n  };\r\n\r\n  Gallery.installAddon(\"items\", pluginInfo);\r\n\r\n  return pluginInfo;\r\n\r\n});\ndefine('skylark-blueimp-gallery2/items/youtube',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-noder\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-plugins-embeds/embed-youtube\",\r\n  '../Gallery',\r\n  './video'\r\n], function (langx, noder, $, EmbedYoutube,Gallery, video) {\r\n  'use strict'\r\n\r\n\r\n  var YouTubeItemFactory = video.ctor.inherit({\r\n    klassName: \"YouTubeItemFactory\",\r\n\r\n    ///YouTubePlayer: YouTubePlayer,\r\n\r\n    options: {\r\n      // The list object property (or data attribute) with the YouTube video id:\r\n      youTubeVideoIdProperty: 'youtube',\r\n      // Optional object with parameters passed to the YouTube video player:\r\n      // https://developers.google.com/youtube/player_parameters\r\n      youTubePlayerVars: {\r\n        wmode: 'transparent'\r\n      },\r\n      // Require a click on the native YouTube player for the initial playback:\r\n      youTubeClickToPlay: true\r\n    },\r\n\r\n    initOptions: function (options) {\r\n      this.overrided();\r\n      this.options = langx.mixin(this.options, YouTubeItemFactory.prototype.options, options);\r\n    },\r\n\r\n    render: function (obj, callback) {\r\n      var options = this.options\r\n      var videoId = this.getItemProperty(obj, options.youTubeVideoIdProperty)\r\n      if (videoId) {\r\n        if (this.getItemProperty(obj, options.urlProperty) === undefined) {\r\n          obj[options.urlProperty] = '//www.youtube.com/watch?v=' + videoId\r\n        }\r\n        if (\r\n          this.getItemProperty(obj, options.videoPosterProperty) === undefined\r\n        ) {\r\n          obj[options.videoPosterProperty] =\r\n            '//img.youtube.com/vi/' + videoId + '/maxresdefault.jpg'\r\n        }\r\n        return this.overrided(\r\n          obj,\r\n          callback,\r\n          new EmbedYoutube(\r\n            noder.createElement(\"div\"),\r\n            {\r\n              videoId,\r\n              playerVars : options.youTubePlayerVars,\r\n              clickToPlay : options.youTubeClickToPlay\r\n            }\r\n          )\r\n        )\r\n      }\r\n    }\r\n  });\r\n\r\n  var pluginInfo = {\r\n    name: \"youtube\",\r\n    mimeType: \"youtube\",\r\n    ctor: YouTubeItemFactory\r\n  };\r\n\r\n  Gallery.installAddon(\"items\", pluginInfo);\r\n\r\n  return pluginInfo;\r\n});\n/* global define, window, document, DocumentTouch */\r\n\r\ndefine('skylark-blueimp-gallery2/views/SliderView',[\r\n  'skylark-langx/langx',\r\n  'skylark-domx-noder',\r\n  'skylark-domx-query',\r\n  '../Gallery'\r\n], function (langx, noder, $,Gallery) {\r\n  'use strict'\r\n  var SliderView = Gallery.ViewBase.inherit({\r\n    klassName: \"SliderView\",\r\n    options: {\r\n      // The Id, element or querySelector of the gallery view:\r\n      container: null,\r\n      // The tag name, Id, element or querySelector of the slides container:\r\n      slidesContainer: 'div',\r\n      // The tag name, Id, element or querySelector of the title element:\r\n      titleElement: 'h3',\r\n      // The class to add when the gallery is visible:\r\n      displayClass: 'skylark-blueimp-gallery-display',\r\n      // The class to add when the gallery only displays one element:\r\n      singleClass: 'skylark-blueimp-gallery-single',\r\n      // The class to add when the left edge has been reached:\r\n      leftEdgeClass: 'skylark-blueimp-gallery-left',\r\n      // The class to add when the right edge has been reached:\r\n      rightEdgeClass: 'skylark-blueimp-gallery-right',\r\n      // The class to add when the automatic slideshow is active:\r\n      playingClass: 'skylark-blueimp-gallery-playing',\r\n      // The class for all slides:\r\n      slideClass: 'slide',\r\n      // The slide class for loading elements:\r\n      slideLoadingClass: 'slide-loading',\r\n      // The slide class for elements that failed to load:\r\n      slideErrorClass: 'slide-error',\r\n      // The class for the content element loaded into each slide:\r\n      slideContentClass: 'slide-content',\r\n      // The class for the \"toggle\" control:\r\n      toggleClass: 'toggle',\r\n      // The class for the \"prev\" control:\r\n      prevClass: 'prev',\r\n      // The class for the \"next\" control:\r\n      nextClass: 'next',\r\n      // The class for the \"close\" control:\r\n      closeClass: 'close',\r\n      // The class for the \"play-pause\" toggle control:\r\n      playPauseClass: 'play-pause',\r\n      // The list object property (or data attribute) with the object type:\r\n      //--- typeProperty: 'type',\r\n      // The list object property (or data attribute) with the object title:\r\n      //--- titleProperty: 'title',\r\n      // The list object property (or data attribute) with the object alt text:\r\n      //--- altTextProperty: 'alt',\r\n      // The list object property (or data attribute) with the object URL:\r\n      //--- urlProperty: 'href',\r\n      // The list object property (or data attribute) with the object srcset URL(s):\r\n      //--- srcsetProperty: 'urlset',\r\n      // The gallery listens for transitionend events before triggering the\r\n      // opened and closed events, unless the following option is set to false:\r\n      displayTransition: true,\r\n      // Defines if the gallery slides are cleared from the gallery modal,\r\n      // or reused for the next gallery initialization:\r\n      clearSlides: true,\r\n      // Defines if images should be stretched to fill the available space,\r\n      // while maintaining their aspect ratio (will only be enabled for browsers\r\n      // supporting background-size=\"contain\", which excludes IE < 9).\r\n      // Set to \"cover\", to make images cover all available space (requires\r\n      // support for background-size=\"cover\", which excludes IE < 9):\r\n      //--- stretchImages: false,\r\n      // Toggle the controls on pressing the Return key:\r\n      toggleControlsOnReturn: true,\r\n      // Toggle the controls on slide click:\r\n      toggleControlsOnSlideClick: true,\r\n      // Toggle the automatic slideshow interval on pressing the Space key:\r\n      toggleSlideshowOnSpace: true,\r\n      // Navigate the gallery by pressing left and right on the keyboard:\r\n      enableKeyboardNavigation: true,\r\n      // Close the gallery on pressing the Esc key:\r\n      closeOnEscape: true,\r\n      // Close the gallery when clicking on an empty slide area:\r\n      closeOnSlideClick: true,\r\n      // Close the gallery by swiping up or down:\r\n      closeOnSwipeUpOrDown: true,\r\n      // Emulate touch events on mouse-pointer devices such as desktop browsers:\r\n      emulateTouchEvents: true,\r\n      // Stop touch events from bubbling up to ancestor elements of the Gallery:\r\n      stopTouchEventsPropagation: false,\r\n      // Hide the page scrollbars:\r\n      hidePageScrollbars: false,\r\n      // Stops any touches on the container from scrolling the page:\r\n      disableScroll: true,\r\n      // Carousel mode (shortcut for carousel specific options):\r\n      carousel: false,\r\n      // Allow continuous navigation, moving from last to first\r\n      // and from first to last slide:\r\n      continuous: true,\r\n      // Remove elements outside of the preload range from the DOM:\r\n      unloadElements: true,\r\n      // Start with the automatic slideshow:\r\n      startSlideshow: false,\r\n      // Delay in milliseconds between slides for the automatic slideshow:\r\n      slideshowInterval: 5000,\r\n      // The starting index as integer.\r\n      // Can also be an object of the given list,\r\n      // or an equal object with the same url property:\r\n      index: 0,\r\n      // The number of elements to load around the current index:\r\n      preloadRange: 2,\r\n      // The transition speed between slide changes in milliseconds:\r\n      transitionSpeed: 400,\r\n      // The transition speed for automatic slide changes, set to an integer\r\n      // greater 0 to override the default transition speed:\r\n      slideshowTransitionSpeed: undefined,\r\n      // The event object for which the default action will be canceled\r\n      // on Gallery initialization (e.g. the click event to open the Gallery):\r\n      event: undefined,\r\n      // Callback function executed when the Gallery is initialized.\r\n      // Is called with the gallery instance as \"this\" object:\r\n      onopen: undefined,\r\n      // Callback function executed when the Gallery has been initialized\r\n      // and the initialization transition has been completed.\r\n      // Is called with the gallery instance as \"this\" object:\r\n      onopened: undefined,\r\n      // Callback function executed on slide change.\r\n      // Is called with the gallery instance as \"this\" object and the\r\n      // current index and slide as arguments:\r\n      onslide: undefined,\r\n      // Callback function executed after the slide change transition.\r\n      // Is called with the gallery instance as \"this\" object and the\r\n      // current index and slide as arguments:\r\n      onslideend: undefined,\r\n      // Callback function executed on slide content load.\r\n      // Is called with the gallery instance as \"this\" object and the\r\n      // slide index and slide element as arguments:\r\n      onslidecomplete: undefined,\r\n      // Callback function executed when the Gallery is about to be closed.\r\n      // Is called with the gallery instance as \"this\" object:\r\n      onclose: undefined,\r\n      // Callback function executed when the Gallery has been closed\r\n      // and the closing transition has been completed.\r\n      // Is called with the gallery instance as \"this\" object:\r\n      onclosed: undefined\r\n    },\r\n\r\n    /*---\r\n    carouselOptions: {\r\n      hidePageScrollbars: false,\r\n      toggleControlsOnReturn: false,\r\n      toggleSlideshowOnSpace: false,\r\n      enableKeyboardNavigation: false,\r\n      closeOnEscape: false,\r\n      closeOnSlideClick: false,\r\n      closeOnSwipeUpOrDown: false,\r\n      disableScroll: false,\r\n      startSlideshow: true\r\n    },\r\n    */\r\n\r\n    console: window.console && typeof window.console.log === 'function' ?\r\n      window.console : {\r\n        log: function () {}\r\n      },\r\n\r\n    // Detect touch, transition, transform and background-size support:\r\n    support: (function (element) {\r\n      var support = {\r\n        touch: window.ontouchstart !== undefined ||\r\n          (window.DocumentTouch && document instanceof DocumentTouch)\r\n      }\r\n      var transitions = {\r\n        webkitTransition: {\r\n          end: 'webkitTransitionEnd',\r\n          prefix: '-webkit-'\r\n        },\r\n        MozTransition: {\r\n          end: 'transitionend',\r\n          prefix: '-moz-'\r\n        },\r\n        OTransition: {\r\n          end: 'otransitionend',\r\n          prefix: '-o-'\r\n        },\r\n        transition: {\r\n          end: 'transitionend',\r\n          prefix: ''\r\n        }\r\n      }\r\n      var prop\r\n      for (prop in transitions) {\r\n        if (\r\n          transitions.hasOwnProperty(prop) &&\r\n          element.style[prop] !== undefined\r\n        ) {\r\n          support.transition = transitions[prop]\r\n          support.transition.name = prop\r\n          break\r\n        }\r\n      }\r\n\r\n      function elementTests() {\r\n        var transition = support.transition\r\n        var prop\r\n        var translateZ\r\n        document.body.appendChild(element)\r\n        if (transition) {\r\n          prop = transition.name.slice(0, -9) + 'ransform'\r\n          if (element.style[prop] !== undefined) {\r\n            element.style[prop] = 'translateZ(0)'\r\n            translateZ = window\r\n              .getComputedStyle(element)\r\n              .getPropertyValue(transition.prefix + 'transform')\r\n            support.transform = {\r\n              prefix: transition.prefix,\r\n              name: prop,\r\n              translate: true,\r\n              translateZ: !!translateZ && translateZ !== 'none'\r\n            }\r\n          }\r\n        }\r\n        if (element.style.backgroundSize !== undefined) {\r\n          support.backgroundSize = {}\r\n          element.style.backgroundSize = 'contain'\r\n          support.backgroundSize.contain =\r\n            window\r\n            .getComputedStyle(element)\r\n            .getPropertyValue('background-size') === 'contain'\r\n          element.style.backgroundSize = 'cover'\r\n          support.backgroundSize.cover =\r\n            window\r\n            .getComputedStyle(element)\r\n            .getPropertyValue('background-size') === 'cover'\r\n        }\r\n        document.body.removeChild(element)\r\n      }\r\n      if (document.body) {\r\n        elementTests()\r\n      } else {\r\n        $(document).on('DOMContentLoaded', elementTests)\r\n      }\r\n      return support\r\n      // Test element, has to be standard HTML and must not be hidden\r\n      // for the CSS3 tests using window.getComputedStyle to be applicable:\r\n    })(document.createElement('div')),\r\n\r\n    requestAnimationFrame: window.requestAnimationFrame ||\r\n      window.webkitRequestAnimationFrame ||\r\n      window.mozRequestAnimationFrame,\r\n\r\n    cancelAnimationFrame: window.cancelAnimationFrame ||\r\n      window.webkitCancelRequestAnimationFrame ||\r\n      window.webkitCancelAnimationFrame ||\r\n      window.mozCancelAnimationFrame,\r\n\r\n    init: function (gallery, options) {\r\n      this.overrided(gallery, options);\r\n\r\n      this.list = this.gallery.items;\r\n      this.options.container = this.gallery.elm();\r\n      this.num = this.list.length;\r\n\r\n      this.initStartIndex()\r\n      if (this.initWidget() === false) {\r\n        return false\r\n      }\r\n      this.initEventListeners()\r\n      // Load the slide at the given index:\r\n      this.onslide(this.index)\r\n      // Manually trigger the slideend event for the initial slide:\r\n      this.ontransitionend()\r\n      // Start the automatic slideshow if applicable:\r\n      if (this.options.startSlideshow) {\r\n        this.play()\r\n      }\r\n    },\r\n\r\n    slide: function (to, speed) {\r\n      window.clearTimeout(this.timeout)\r\n      var index = this.index\r\n      var direction\r\n      var naturalDirection\r\n      var diff\r\n      if (index === to || this.num === 1) {\r\n        return\r\n      }\r\n      if (!speed) {\r\n        speed = this.options.transitionSpeed\r\n      }\r\n      if (this.support.transform) {\r\n        if (!this.options.continuous) {\r\n          to = this.circle(to)\r\n        }\r\n        // 1: backward, -1: forward:\r\n        direction = Math.abs(index - to) / (index - to)\r\n        // Get the actual position of the slide:\r\n        if (this.options.continuous) {\r\n          naturalDirection = direction\r\n          direction = -this.positions[this.circle(to)] / this.slideWidth\r\n          // If going forward but to < index, use to = slides.length + to\r\n          // If going backward but to > index, use to = -slides.length + to\r\n          if (direction !== naturalDirection) {\r\n            to = -direction * this.num + to\r\n          }\r\n        }\r\n        diff = Math.abs(index - to) - 1\r\n        // Move all the slides between index and to in the right direction:\r\n        while (diff) {\r\n          diff -= 1\r\n          this.move(\r\n            this.circle((to > index ? to : index) - diff - 1),\r\n            this.slideWidth * direction,\r\n            0\r\n          )\r\n        }\r\n        to = this.circle(to)\r\n        this.move(index, this.slideWidth * direction, speed)\r\n        this.move(to, 0, speed)\r\n        if (this.options.continuous) {\r\n          this.move(\r\n            this.circle(to - direction),\r\n            -(this.slideWidth * direction),\r\n            0\r\n          )\r\n        }\r\n      } else {\r\n        to = this.circle(to)\r\n        this.animate(index * -this.slideWidth, to * -this.slideWidth, speed)\r\n      }\r\n      this.onslide(to)\r\n    },\r\n\r\n    getIndex: function () {\r\n      return this.index\r\n    },\r\n\r\n    getNumber: function () {\r\n      return this.num\r\n    },\r\n\r\n    prev: function () {\r\n      if (this.options.continuous || this.index) {\r\n        this.slide(this.index - 1)\r\n      }\r\n    },\r\n\r\n    next: function () {\r\n      if (this.options.continuous || this.index < this.num - 1) {\r\n        this.slide(this.index + 1)\r\n      }\r\n    },\r\n\r\n    play: function (time) {\r\n      var that = this\r\n      window.clearTimeout(this.timeout)\r\n      this.interval = time || this.options.slideshowInterval\r\n      if (this.elements[this.index] > 1) {\r\n        this.timeout = this.setTimeout(\r\n          (!this.requestAnimationFrame && this.slide) ||\r\n          function (to, speed) {\r\n            that.animationFrameId = that.requestAnimationFrame.call(\r\n              window,\r\n              function () {\r\n                that.slide(to, speed)\r\n              }\r\n            )\r\n          },\r\n          [this.index + 1, this.options.slideshowTransitionSpeed],\r\n          this.interval\r\n        )\r\n      }\r\n      this.container.addClass(this.options.playingClass)\r\n    },\r\n\r\n    pause: function () {\r\n      window.clearTimeout(this.timeout)\r\n      this.interval = null\r\n      if (this.cancelAnimationFrame) {\r\n        this.cancelAnimationFrame.call(window, this.animationFrameId)\r\n        this.animationFrameId = null\r\n      }\r\n      this.container.removeClass(this.options.playingClass)\r\n    },\r\n\r\n    add: function (list) {\r\n      var i\r\n      if (!list.concat) {\r\n        // Make a real array out of the list to add:\r\n        list = Array.prototype.slice.call(list)\r\n      }\r\n      if (!this.list.concat) {\r\n        // Make a real array out of the Gallery list:\r\n        this.list = Array.prototype.slice.call(this.list)\r\n      }\r\n      this.list = this.list.concat(list)\r\n      this.num = this.list.length\r\n      if (this.num > 2 && this.options.continuous === null) {\r\n        this.options.continuous = true\r\n        this.container.removeClass(this.options.leftEdgeClass)\r\n      }\r\n      this.container\r\n        .removeClass(this.options.rightEdgeClass)\r\n        .removeClass(this.options.singleClass)\r\n      for (i = this.num - list.length; i < this.num; i += 1) {\r\n        this.addSlide(i)\r\n        this.positionSlide(i)\r\n      }\r\n      this.positions.length = this.num\r\n      this.initSlides(true)\r\n    },\r\n\r\n    resetSlides: function () {\r\n      this.slidesContainer.empty()\r\n      this.unloadAllSlides()\r\n      this.slides = []\r\n    },\r\n\r\n    handleClose: function () {\r\n      var options = this.options\r\n      this.destroyEventListeners()\r\n      // Cancel the slideshow:\r\n      this.pause()\r\n      this.container[0].style.display = 'none'\r\n      this.container\r\n        .removeClass(options.displayClass)\r\n        .removeClass(options.singleClass)\r\n        .removeClass(options.leftEdgeClass)\r\n        .removeClass(options.rightEdgeClass)\r\n      if (options.hidePageScrollbars) {\r\n        document.body.style.overflow = this.bodyOverflowStyle\r\n      }\r\n      if (this.options.clearSlides) {\r\n        this.resetSlides()\r\n      }\r\n      if (this.options.onclosed) {\r\n        this.options.onclosed.call(this)\r\n      }\r\n    },\r\n\r\n    close: function () {\r\n      var that = this\r\n\r\n      function closeHandler(event) {\r\n        if (event.target === that.container[0]) {\r\n          that.container.off(that.support.transition.end, closeHandler)\r\n          that.handleClose()\r\n        }\r\n      }\r\n      if (this.options.onclose) {\r\n        this.options.onclose.call(this)\r\n      }\r\n      if (this.support.transition && this.options.displayTransition) {\r\n        this.container.on(this.support.transition.end, closeHandler)\r\n        this.container.removeClass(this.options.displayClass)\r\n      } else {\r\n        this.handleClose()\r\n      }\r\n    },\r\n\r\n    circle: function (index) {\r\n      // Always return a number inside of the slides index range:\r\n      return (this.num + index % this.num) % this.num\r\n    },\r\n\r\n    move: function (index, dist, speed) {\r\n      this.translateX(index, dist, speed)\r\n      this.positions[index] = dist\r\n    },\r\n\r\n    translate: function (index, x, y, speed) {\r\n      var style = this.slides[index].style\r\n      var transition = this.support.transition\r\n      var transform = this.support.transform\r\n      style[transition.name + 'Duration'] = speed + 'ms'\r\n      style[transform.name] =\r\n        'translate(' +\r\n        x +\r\n        'px, ' +\r\n        y +\r\n        'px)' +\r\n        (transform.translateZ ? ' translateZ(0)' : '')\r\n    },\r\n\r\n    translateX: function (index, x, speed) {\r\n      this.translate(index, x, 0, speed)\r\n    },\r\n\r\n    translateY: function (index, y, speed) {\r\n      this.translate(index, 0, y, speed)\r\n    },\r\n\r\n    animate: function (from, to, speed) {\r\n      if (!speed) {\r\n        this.slidesContainer[0].style.left = to + 'px'\r\n        return\r\n      }\r\n      var that = this\r\n      var start = new Date().getTime()\r\n      var timer = window.setInterval(function () {\r\n        var timeElap = new Date().getTime() - start\r\n        if (timeElap > speed) {\r\n          that.slidesContainer[0].style.left = to + 'px'\r\n          that.ontransitionend()\r\n          window.clearInterval(timer)\r\n          return\r\n        }\r\n        that.slidesContainer[0].style.left =\r\n          (to - from) * (Math.floor(timeElap / speed * 100) / 100) + from + 'px'\r\n      }, 4)\r\n    },\r\n\r\n    preventDefault: function (event) {\r\n      if (event.preventDefault) {\r\n        event.preventDefault()\r\n      } else {\r\n        event.returnValue = false\r\n      }\r\n    },\r\n\r\n    stopPropagation: function (event) {\r\n      if (event.stopPropagation) {\r\n        event.stopPropagation()\r\n      } else {\r\n        event.cancelBubble = true\r\n      }\r\n    },\r\n\r\n    onresize: function () {\r\n      this.initSlides(true)\r\n    },\r\n\r\n    onmousedown: function (event) {\r\n      // Trigger on clicks of the left mouse button only\r\n      // and exclude video & audio elements:\r\n      if (\r\n        event.which &&\r\n        event.which === 1 &&\r\n        event.target.nodeName !== 'VIDEO' &&\r\n        event.target.nodeName !== 'AUDIO'\r\n      ) {\r\n        // Preventing the default mousedown action is required\r\n        // to make touch emulation work with Firefox:\r\n        event.preventDefault();\r\n        (event.originalEvent || event).touches = [{\r\n          pageX: event.pageX,\r\n          pageY: event.pageY\r\n        }]\r\n        this.ontouchstart(event)\r\n      }\r\n    },\r\n\r\n    onmousemove: function (event) {\r\n      if (this.touchStart) {;\r\n        (event.originalEvent || event).touches = [{\r\n          pageX: event.pageX,\r\n          pageY: event.pageY\r\n        }]\r\n        this.ontouchmove(event)\r\n      }\r\n    },\r\n\r\n    onmouseup: function (event) {\r\n      if (this.touchStart) {\r\n        this.ontouchend(event)\r\n        delete this.touchStart\r\n      }\r\n    },\r\n\r\n    onmouseout: function (event) {\r\n      if (this.touchStart) {\r\n        var target = event.target\r\n        var related = event.relatedTarget\r\n        if (!related || (related !== target && !noder.contains(target, related))) {\r\n          this.onmouseup(event)\r\n        }\r\n      }\r\n    },\r\n\r\n    ontouchstart: function (event) {\r\n      if (this.options.stopTouchEventsPropagation) {\r\n        this.stopPropagation(event)\r\n      }\r\n      // jQuery doesn't copy touch event properties by default,\r\n      // so we have to access the originalEvent object:\r\n      var touches = (event.originalEvent || event).touches[0]\r\n      this.touchStart = {\r\n        // Remember the initial touch coordinates:\r\n        x: touches.pageX,\r\n        y: touches.pageY,\r\n        // Store the time to determine touch duration:\r\n        time: Date.now()\r\n      }\r\n      // Helper variable to detect scroll movement:\r\n      this.isScrolling = undefined\r\n      // Reset delta values:\r\n      this.touchDelta = {}\r\n    },\r\n\r\n    ontouchmove: function (event) {\r\n      if (this.options.stopTouchEventsPropagation) {\r\n        this.stopPropagation(event)\r\n      }\r\n      // jQuery doesn't copy touch event properties by default,\r\n      // so we have to access the originalEvent object:\r\n      var touches = (event.originalEvent || event).touches[0]\r\n      var scale = (event.originalEvent || event).scale\r\n      var index = this.index\r\n      var touchDeltaX\r\n      var indices\r\n      // Ensure this is a one touch swipe and not, e.g. a pinch:\r\n      if (touches.length > 1 || (scale && scale !== 1)) {\r\n        return\r\n      }\r\n      if (this.options.disableScroll) {\r\n        event.preventDefault()\r\n      }\r\n      // Measure change in x and y coordinates:\r\n      this.touchDelta = {\r\n        x: touches.pageX - this.touchStart.x,\r\n        y: touches.pageY - this.touchStart.y\r\n      }\r\n      touchDeltaX = this.touchDelta.x\r\n      // Detect if this is a vertical scroll movement (run only once per touch):\r\n      if (this.isScrolling === undefined) {\r\n        this.isScrolling =\r\n          this.isScrolling ||\r\n          Math.abs(touchDeltaX) < Math.abs(this.touchDelta.y)\r\n      }\r\n      if (!this.isScrolling) {\r\n        // Always prevent horizontal scroll:\r\n        event.preventDefault()\r\n        // Stop the slideshow:\r\n        window.clearTimeout(this.timeout)\r\n        if (this.options.continuous) {\r\n          indices = [this.circle(index + 1), index, this.circle(index - 1)]\r\n        } else {\r\n          // Increase resistance if first slide and sliding left\r\n          // or last slide and sliding right:\r\n          this.touchDelta.x = touchDeltaX =\r\n            touchDeltaX /\r\n            ((!index && touchDeltaX > 0) ||\r\n              (index === this.num - 1 && touchDeltaX < 0) ?\r\n              Math.abs(touchDeltaX) / this.slideWidth + 1 :\r\n              1)\r\n          indices = [index]\r\n          if (index) {\r\n            indices.push(index - 1)\r\n          }\r\n          if (index < this.num - 1) {\r\n            indices.unshift(index + 1)\r\n          }\r\n        }\r\n        while (indices.length) {\r\n          index = indices.pop()\r\n          this.translateX(index, touchDeltaX + this.positions[index], 0)\r\n        }\r\n      } else {\r\n        this.translateY(index, this.touchDelta.y + this.positions[index], 0)\r\n      }\r\n    },\r\n\r\n    ontouchend: function (event) {\r\n      if (this.options.stopTouchEventsPropagation) {\r\n        this.stopPropagation(event)\r\n      }\r\n      var index = this.index\r\n      var speed = this.options.transitionSpeed\r\n      var slideWidth = this.slideWidth\r\n      var isShortDuration = Number(Date.now() - this.touchStart.time) < 250\r\n      // Determine if slide attempt triggers next/prev slide:\r\n      var isValidSlide =\r\n        (isShortDuration && Math.abs(this.touchDelta.x) > 20) ||\r\n        Math.abs(this.touchDelta.x) > slideWidth / 2\r\n      // Determine if slide attempt is past start or end:\r\n      var isPastBounds =\r\n        (!index && this.touchDelta.x > 0) ||\r\n        (index === this.num - 1 && this.touchDelta.x < 0)\r\n      var isValidClose = !isValidSlide &&\r\n        this.options.closeOnSwipeUpOrDown &&\r\n        ((isShortDuration && Math.abs(this.touchDelta.y) > 20) ||\r\n          Math.abs(this.touchDelta.y) > this.slideHeight / 2)\r\n      var direction\r\n      var indexForward\r\n      var indexBackward\r\n      var distanceForward\r\n      var distanceBackward\r\n      if (this.options.continuous) {\r\n        isPastBounds = false\r\n      }\r\n      // Determine direction of swipe (true: right, false: left):\r\n      direction = this.touchDelta.x < 0 ? -1 : 1\r\n      if (!this.isScrolling) {\r\n        if (isValidSlide && !isPastBounds) {\r\n          indexForward = index + direction\r\n          indexBackward = index - direction\r\n          distanceForward = slideWidth * direction\r\n          distanceBackward = -slideWidth * direction\r\n          if (this.options.continuous) {\r\n            this.move(this.circle(indexForward), distanceForward, 0)\r\n            this.move(this.circle(index - 2 * direction), distanceBackward, 0)\r\n          } else if (indexForward >= 0 && indexForward < this.num) {\r\n            this.move(indexForward, distanceForward, 0)\r\n          }\r\n          this.move(index, this.positions[index] + distanceForward, speed)\r\n          this.move(\r\n            this.circle(indexBackward),\r\n            this.positions[this.circle(indexBackward)] + distanceForward,\r\n            speed\r\n          )\r\n          index = this.circle(indexBackward)\r\n          this.onslide(index)\r\n        } else {\r\n          // Move back into position\r\n          if (this.options.continuous) {\r\n            this.move(this.circle(index - 1), -slideWidth, speed)\r\n            this.move(index, 0, speed)\r\n            this.move(this.circle(index + 1), slideWidth, speed)\r\n          } else {\r\n            if (index) {\r\n              this.move(index - 1, -slideWidth, speed)\r\n            }\r\n            this.move(index, 0, speed)\r\n            if (index < this.num - 1) {\r\n              this.move(index + 1, slideWidth, speed)\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        if (isValidClose) {\r\n          this.close()\r\n        } else {\r\n          // Move back into position\r\n          this.translateY(index, 0, speed)\r\n        }\r\n      }\r\n    },\r\n\r\n    ontouchcancel: function (event) {\r\n      if (this.touchStart) {\r\n        this.ontouchend(event)\r\n        delete this.touchStart\r\n      }\r\n    },\r\n\r\n    ontransitionend: function (event) {\r\n      var slide = this.slides[this.index]\r\n      if (!event || slide === event.target) {\r\n        if (this.interval) {\r\n          this.play()\r\n        }\r\n        this.setTimeout(this.options.onslideend, [this.index, slide])\r\n      }\r\n    },\r\n\r\n    oncomplete: function (event) {\r\n      var target = event.target || event.srcElement\r\n      var parent = target && target.parentNode\r\n      var index\r\n      if (!target || !parent) {\r\n        return\r\n      }\r\n      index = this.getNodeIndex(parent)\r\n      $(parent).removeClass(this.options.slideLoadingClass)\r\n      if (event.type === 'error') {\r\n        $(parent).addClass(this.options.slideErrorClass)\r\n        this.elements[index] = 3 // Fail\r\n      } else {\r\n        this.elements[index] = 2 // Done\r\n      }\r\n      // Fix for IE7's lack of support for percentage max-height:\r\n      if (target.clientHeight > this.container[0].clientHeight) {\r\n        target.style.maxHeight = this.container[0].clientHeight\r\n      }\r\n      if (this.interval && this.slides[this.index] === parent) {\r\n        this.play()\r\n      }\r\n      this.setTimeout(this.options.onslidecomplete, [index, parent])\r\n    },\r\n\r\n    onload: function (event) {\r\n      this.oncomplete(event)\r\n    },\r\n\r\n    onerror: function (event) {\r\n      this.oncomplete(event)\r\n    },\r\n\r\n    onkeydown: function (event) {\r\n      switch (event.which || event.keyCode) {\r\n        case 13: // Return\r\n          if (this.options.toggleControlsOnReturn) {\r\n            this.preventDefault(event)\r\n            this.toggleControls()\r\n          }\r\n          break\r\n        case 27: // Esc\r\n          if (this.options.closeOnEscape) {\r\n            this.close()\r\n            // prevent Esc from closing other things\r\n            event.stopImmediatePropagation()\r\n          }\r\n          break\r\n        case 32: // Space\r\n          if (this.options.toggleSlideshowOnSpace) {\r\n            this.preventDefault(event)\r\n            this.toggleSlideshow()\r\n          }\r\n          break\r\n        case 37: // Left\r\n          if (this.options.enableKeyboardNavigation) {\r\n            this.preventDefault(event)\r\n            this.prev()\r\n          }\r\n          break\r\n        case 39: // Right\r\n          if (this.options.enableKeyboardNavigation) {\r\n            this.preventDefault(event)\r\n            this.next()\r\n          }\r\n          break\r\n      }\r\n    },\r\n\r\n    handleClick: function (event) {\r\n      var options = this.options\r\n      var target = event.target || event.srcElement\r\n      var parent = target.parentNode\r\n\r\n      function isTarget(className) {\r\n        return $(target).hasClass(className) || $(parent).hasClass(className)\r\n      }\r\n      if (isTarget(options.toggleClass)) {\r\n        // Click on \"toggle\" control\r\n        this.preventDefault(event)\r\n        this.toggleControls()\r\n      } else if (isTarget(options.prevClass)) {\r\n        // Click on \"prev\" control\r\n        this.preventDefault(event)\r\n        this.prev()\r\n      } else if (isTarget(options.nextClass)) {\r\n        // Click on \"next\" control\r\n        this.preventDefault(event)\r\n        this.next()\r\n      } else if (isTarget(options.closeClass)) {\r\n        // Click on \"close\" control\r\n        this.preventDefault(event)\r\n        this.close()\r\n      } else if (isTarget(options.playPauseClass)) {\r\n        // Click on \"play-pause\" control\r\n        this.preventDefault(event)\r\n        this.toggleSlideshow()\r\n      } else if (parent === this.slidesContainer[0]) {\r\n        // Click on slide background\r\n        if (options.closeOnSlideClick) {\r\n          this.preventDefault(event)\r\n          this.close()\r\n        } else if (options.toggleControlsOnSlideClick) {\r\n          this.preventDefault(event)\r\n          this.toggleControls()\r\n        }\r\n      } else if (\r\n        parent.parentNode &&\r\n        parent.parentNode === this.slidesContainer[0]\r\n      ) {\r\n        // Click on displayed element\r\n        if (options.toggleControlsOnSlideClick) {\r\n          this.preventDefault(event)\r\n          this.toggleControls()\r\n        }\r\n      }\r\n    },\r\n\r\n    onclick: function (event) {\r\n      if (\r\n        this.options.emulateTouchEvents &&\r\n        this.touchDelta &&\r\n        (Math.abs(this.touchDelta.x) > 20 || Math.abs(this.touchDelta.y) > 20)\r\n      ) {\r\n        delete this.touchDelta\r\n        return\r\n      }\r\n      return this.handleClick(event)\r\n    },\r\n\r\n    updateEdgeClasses: function (index) {\r\n      if (!index) {\r\n        this.container.addClass(this.options.leftEdgeClass)\r\n      } else {\r\n        this.container.removeClass(this.options.leftEdgeClass)\r\n      }\r\n      if (index === this.num - 1) {\r\n        this.container.addClass(this.options.rightEdgeClass)\r\n      } else {\r\n        this.container.removeClass(this.options.rightEdgeClass)\r\n      }\r\n    },\r\n\r\n    handleSlide: function (index) {\r\n      if (!this.options.continuous) {\r\n        this.updateEdgeClasses(index)\r\n      }\r\n      this.loadElements(index)\r\n      if (this.options.unloadElements) {\r\n        this.unloadElements(index)\r\n      }\r\n      this.setTitle(index)\r\n    },\r\n\r\n    onslide: function (index) {\r\n      this.index = index\r\n      this.handleSlide(index)\r\n      this.setTimeout(this.options.onslide, [index, this.slides[index]])\r\n    },\r\n\r\n    setTitle: function (index) {\r\n      var firstChild = this.slides[index].firstChild\r\n      var text = firstChild.title || firstChild.alt\r\n      var titleElement = this.titleElement\r\n      if (titleElement.length) {\r\n        this.titleElement.empty()\r\n        if (text) {\r\n          titleElement[0].appendChild(document.createTextNode(text))\r\n        }\r\n      }\r\n    },\r\n\r\n    setTimeout: function (func, args, wait) {\r\n      var that = this\r\n      return (\r\n        func &&\r\n        window.setTimeout(function () {\r\n          func.apply(that, args || [])\r\n        }, wait || 0)\r\n      )\r\n    },\r\n\r\n    createElement: function (obj, callback) {\r\n      var element = this.gallery.renderItem(obj, callback);\r\n      $(element).addClass(this.options.slideContentClass);\r\n      return element;\r\n    },\r\n\r\n    loadElement: function (index) {\r\n      if (!this.elements[index]) {\r\n        if (this.slides[index].firstChild) {\r\n          this.elements[index] = $(this.slides[index]).hasClass(\r\n              this.options.slideErrorClass\r\n            ) ?\r\n            3 :\r\n            2\r\n        } else {\r\n          this.elements[index] = 1 // Loading\r\n          $(this.slides[index]).addClass(this.options.slideLoadingClass)\r\n          this.slides[index].appendChild(\r\n            this.createElement(this.list[index], this.proxyListener)\r\n          )\r\n        }\r\n      }\r\n    },\r\n\r\n    loadElements: function (index) {\r\n      var limit = Math.min(this.num, this.options.preloadRange * 2 + 1)\r\n      var j = index\r\n      var i\r\n      for (i = 0; i < limit; i += 1) {\r\n        // First load the current slide element (0),\r\n        // then the next one (+1),\r\n        // then the previous one (-2),\r\n        // then the next after next (+2), etc.:\r\n        j += i * (i % 2 === 0 ? -1 : 1)\r\n        // Connect the ends of the list to load slide elements for\r\n        // continuous navigation:\r\n        j = this.circle(j)\r\n        this.loadElement(j)\r\n      }\r\n    },\r\n\r\n    unloadElements: function (index) {\r\n      var i, diff\r\n      for (i in this.elements) {\r\n        if (this.elements.hasOwnProperty(i)) {\r\n          diff = Math.abs(index - i)\r\n          if (\r\n            diff > this.options.preloadRange &&\r\n            diff + this.options.preloadRange < this.num\r\n          ) {\r\n            this.unloadSlide(i)\r\n            delete this.elements[i]\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    addSlide: function (index) {\r\n      var slide = this.slidePrototype.cloneNode(false)\r\n      slide.setAttribute('data-index', index)\r\n      this.slidesContainer[0].appendChild(slide)\r\n      this.slides.push(slide)\r\n    },\r\n\r\n    positionSlide: function (index) {\r\n      var slide = this.slides[index]\r\n      slide.style.width = this.slideWidth + 'px'\r\n      if (this.support.transform) {\r\n        slide.style.left = index * -this.slideWidth + 'px'\r\n        this.move(\r\n          index,\r\n          this.index > index ?\r\n          -this.slideWidth :\r\n          this.index < index ? this.slideWidth : 0,\r\n          0\r\n        )\r\n      }\r\n    },\r\n\r\n    initSlides: function (reload) {\r\n      var clearSlides, i\r\n      if (!reload) {\r\n        this.positions = []\r\n        this.positions.length = this.num\r\n        this.elements = {}\r\n        this.imagePrototype = document.createElement('img')\r\n        this.elementPrototype = document.createElement('div')\r\n        this.slidePrototype = document.createElement('div')\r\n        $(this.slidePrototype).addClass(this.options.slideClass)\r\n        this.slides = this.slidesContainer[0].children\r\n        clearSlides =\r\n          this.options.clearSlides || this.slides.length !== this.num\r\n      }\r\n      this.slideWidth = this.container[0].clientWidth\r\n      this.slideHeight = this.container[0].clientHeight\r\n      this.slidesContainer[0].style.width = this.num * this.slideWidth + 'px'\r\n      if (clearSlides) {\r\n        this.resetSlides()\r\n      }\r\n      for (i = 0; i < this.num; i += 1) {\r\n        if (clearSlides) {\r\n          this.addSlide(i)\r\n        }\r\n        this.positionSlide(i)\r\n      }\r\n      // Reposition the slides before and after the given index:\r\n      if (this.options.continuous && this.support.transform) {\r\n        this.move(this.circle(this.index - 1), -this.slideWidth, 0)\r\n        this.move(this.circle(this.index + 1), this.slideWidth, 0)\r\n      }\r\n      if (!this.support.transform) {\r\n        this.slidesContainer[0].style.left =\r\n          this.index * -this.slideWidth + 'px'\r\n      }\r\n    },\r\n\r\n    unloadSlide: function (index) {\r\n      var slide, firstChild\r\n      slide = this.slides[index]\r\n      firstChild = slide.firstChild\r\n      if (firstChild !== null) {\r\n        slide.removeChild(firstChild)\r\n      }\r\n    },\r\n\r\n    unloadAllSlides: function () {\r\n      var i, len\r\n      for (i = 0, len = this.slides.length; i < len; i++) {\r\n        this.unloadSlide(i)\r\n      }\r\n    },\r\n\r\n    toggleControls: function () {\r\n\r\n      var controlsClass = this.options.controlsClass\r\n      if (this.container.hasClass(controlsClass)) {\r\n        this.container.removeClass(controlsClass)\r\n      } else {\r\n        this.container.addClass(controlsClass)\r\n      }\r\n    },\r\n\r\n    toggleSlideshow: function () {\r\n      if (!this.interval) {\r\n        this.play()\r\n      } else {\r\n        this.pause()\r\n      }\r\n    },\r\n\r\n    getNodeIndex: function (element) {\r\n      return parseInt(element.getAttribute('data-index'), 10)\r\n    },\r\n\r\n    initStartIndex: function () {\r\n      var gallery = this.gallery,\r\n        index = this.options.index;\r\n      var i\r\n      // Check if the index is given as a list object:\r\n      if (index && typeof index !== 'number') {\r\n        for (i = 0; i < this.num; i += 1) {\r\n          if (\r\n            this.list[i] === index || gallery.getItemUrl(this.list[i]) === gallery.getItemUrl(index)) {\r\n            index = i\r\n            break\r\n          }\r\n        }\r\n      }\r\n      // Make sure the index is in the list range:\r\n      this.index = this.circle(parseInt(index, 10) || 0)\r\n    },\r\n\r\n    initEventListeners: function () {\r\n      var that = this\r\n      var slidesContainer = this.slidesContainer\r\n\r\n      function proxyListener(event) {\r\n        var type =\r\n          that.support.transition && that.support.transition.end === event.type ?\r\n          'transitionend' :\r\n          event.type\r\n        that['on' + type](event)\r\n      }\r\n      $(window).on('resize', proxyListener)\r\n      $(document.body).on('keydown', proxyListener)\r\n      this.container.on('click', proxyListener)\r\n      if (this.support.touch) {\r\n        slidesContainer.on(\r\n          'touchstart touchmove touchend touchcancel',\r\n          proxyListener\r\n        )\r\n      } else if (this.options.emulateTouchEvents && this.support.transition) {\r\n        slidesContainer.on(\r\n          'mousedown mousemove mouseup mouseout',\r\n          proxyListener\r\n        )\r\n      }\r\n      if (this.support.transition) {\r\n        slidesContainer.on(this.support.transition.end, proxyListener)\r\n      }\r\n      this.proxyListener = proxyListener\r\n    },\r\n\r\n    destroyEventListeners: function () {\r\n      var slidesContainer = this.slidesContainer\r\n      var proxyListener = this.proxyListener\r\n      $(window).off('resize', proxyListener)\r\n      $(document.body).off('keydown', proxyListener)\r\n      this.container.off('click', proxyListener)\r\n      if (this.support.touch) {\r\n        slidesContainer.off(\r\n          'touchstart touchmove touchend touchcancel',\r\n          proxyListener\r\n        )\r\n      } else if (this.options.emulateTouchEvents && this.support.transition) {\r\n        slidesContainer.off(\r\n          'mousedown mousemove mouseup mouseout',\r\n          proxyListener\r\n        )\r\n      }\r\n      if (this.support.transition) {\r\n        slidesContainer.off(this.support.transition.end, proxyListener)\r\n      }\r\n    },\r\n\r\n    handleOpen: function () {\r\n      if (this.options.onopened) {\r\n        this.options.onopened.call(this)\r\n      }\r\n    },\r\n\r\n    initWidget: function () {\r\n      var that = this\r\n\r\n      function openHandler(event) {\r\n        if (event.target === that.container[0]) {\r\n          that.container.off(that.support.transition.end, openHandler)\r\n          that.handleOpen()\r\n        }\r\n      }\r\n      this.container = $(this.options.container)\r\n      if (!this.container.length) {\r\n        this.console.log(\r\n          'blueimp Gallery: Widget container not found.',\r\n          this.options.container\r\n        )\r\n        return false\r\n      }\r\n      this.slidesContainer = this.container\r\n        .find(this.options.slidesContainer)\r\n        .first()\r\n      if (!this.slidesContainer.length) {\r\n        this.console.log(\r\n          'blueimp Gallery: Slides container not found.',\r\n          this.options.slidesContainer\r\n        )\r\n        return false\r\n      }\r\n      this.titleElement = this.container.find(this.options.titleElement).first()\r\n      if (this.num === 1) {\r\n        this.container.addClass(this.options.singleClass)\r\n      }\r\n      if (this.options.onopen) {\r\n        this.options.onopen.call(this)\r\n      }\r\n      if (this.support.transition && this.options.displayTransition) {\r\n        this.container.on(this.support.transition.end, openHandler)\r\n      } else {\r\n        this.handleOpen()\r\n      }\r\n      if (this.options.hidePageScrollbars) {\r\n        // Hide the page scrollbars:\r\n        this.bodyOverflowStyle = document.body.style.overflow\r\n        document.body.style.overflow = 'hidden'\r\n      }\r\n      this.container[0].style.display = 'block'\r\n      this.initSlides()\r\n      this.container.addClass(this.options.displayClass)\r\n    },\r\n\r\n    initOptions: function (options) {\r\n      // Create a copy of the prototype options:\r\n      this.overrided(langx.mixin({}, SliderView.prototype.options, options));\r\n\r\n      if (this.num < 3) {\r\n        // 1 or 2 slides cannot be displayed continuous,\r\n        // remember the original option by setting to null instead of false:\r\n        this.options.continuous = this.options.continuous ? null : false\r\n      }\r\n      if (!this.support.transition) {\r\n        this.options.emulateTouchEvents = false\r\n      }\r\n      if (this.options.event) {\r\n        this.preventDefault(this.options.event)\r\n      }\r\n    }\r\n  });\r\n\r\n  Gallery.installAddon(\"views\", {\r\n    \"name\": \"slider\",\r\n    \"ctor\": SliderView,\r\n    \"templates\": {\r\n      \"default\": '<div class=\"slides\"></div>' +\r\n        '<h3 class=\"title\"></h3>' +\r\n        '<a class=\"prev\"></a>' +\r\n        '<a class=\"next\"></a>' +\r\n        '<a class=\"close\"></a>' +\r\n        '<a class=\"play-pause\"></a>' +\r\n        '<ol class=\"indicator\"></ol>'\r\n\r\n    }\r\n  });\r\n\r\n  return Gallery.SliderView = SliderView;\r\n});\ndefine('skylark-blueimp-gallery2/views/CarouselView',[\r\n\t'../Gallery',\r\n\t'./SliderView'\r\n], function (Gallery, SliderView) {\r\n\r\n\tvar CarouselView = SliderView.inherit({\r\n\t\tklassName: \"CarouselView\",\r\n\r\n\t\toptions: {\r\n\t\t\thidePageScrollbars: false,\r\n\t\t\ttoggleControlsOnReturn: false,\r\n\t\t\ttoggleSlideshowOnSpace: false,\r\n\t\t\tenableKeyboardNavigation: false,\r\n\t\t\tcloseOnEscape: false,\r\n\t\t\tcloseOnSlideClick: false,\r\n\t\t\tcloseOnSwipeUpOrDown: false,\r\n\t\t\tdisableScroll: false,\r\n\t\t\tstartSlideshow: true\r\n\t\t},\r\n\r\n\t\tinitOptions: function (options) {\r\n\t\t\tvar options = langx.mixin({}, CarouselView.prototype.options, options);\r\n\t\t\tthis.overrided(options);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tGallery.installAddon(\"views\", {\r\n\t\t\"name\": \"carousel\",\r\n\t\t\"ctor\": CarouselView,\r\n\t\t\"templates\": {\r\n\t\t\t\"default\": '<div class=\"slides\"></div>' +\r\n\t\t\t\t'<h3 class=\"title\"></h3>' +\r\n\t\t\t\t'<a class=\"prev\"></a>' +\r\n\t\t\t\t'<a class=\"next\"></a>' +\r\n\t\t\t\t'<a class=\"close\"></a>' +\r\n\t\t\t\t'<a class=\"play-pause\"></a>' +\r\n\t\t\t\t'<ol class=\"indicator\"></ol>'\r\n\r\n\t\t}\r\n\t});\r\n\r\n\treturn CarouselView;\r\n\r\n});\ndefine('skylark-blueimp-gallery2/views/LightBoxView',[\r\n\t'skylark-langx/langx',\r\n\t\"skylark-domx-query\",\r\n\t'../Gallery',\r\n\t'./SliderView'\r\n], function (langx,$, Gallery, SliderView) {\r\n\r\n\tvar LightBoxView = SliderView.inherit({\r\n\t\tklassName: \"LightBoxView\",\r\n\t\toptions: {\r\n\t\t\t// Hide the page scrollbars:\r\n\t\t\thidePageScrollbars: false,\r\n\r\n\t\t\t// The tag name, Id, element or querySelector of the indicator container:\r\n\t\t\tindicatorContainer: 'ol',\r\n\t\t\t// The class for the active indicator:\r\n\t\t\tactiveIndicatorClass: 'active',\r\n\t\t\t// The list object property (or data attribute) with the thumbnail URL,\r\n\t\t\t// used as alternative to a thumbnail child element:\r\n\t\t\tthumbnailProperty: 'thumbnail',\r\n\t\t\t// Defines if the gallery indicators should display a thumbnail:\r\n\t\t\tthumbnailIndicators: true\r\n\t\t},\r\n\r\n\r\n\t\tinitOptions: function (options) {\r\n\t\t\tvar options = langx.mixin({}, LightBoxView.prototype.options, options);\r\n\t\t\tthis.overrided(options);\r\n\t\t},\r\n\r\n\t\tcreateIndicator: function (obj) {\r\n\t\t\tvar gallery = this.gallery,\r\n\t\t\t\tindicator = this.indicatorPrototype.cloneNode(false)\r\n\t\t\tvar title = gallery.getItemTitle(obj)\r\n\t\t\tvar thumbnailProperty = this.options.thumbnailProperty\r\n\t\t\tvar thumbnailUrl\r\n\t\t\tvar thumbnail\r\n\t\t\tif (this.options.thumbnailIndicators) {\r\n\t\t\t\tif (thumbnailProperty) {\r\n\t\t\t\t\tthumbnailUrl = Gallery.getItemProperty(obj, thumbnailProperty)\r\n\t\t\t\t}\r\n\t\t\t\tif (thumbnailUrl === undefined) {\r\n\t\t\t\t\tthumbnail = obj.getElementsByTagName && $(obj).find('img')[0]\r\n\t\t\t\t\tif (thumbnail) {\r\n\t\t\t\t\t\tthumbnailUrl = thumbnail.src\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (thumbnailUrl) {\r\n\t\t\t\t\tindicator.style.backgroundImage = 'url(\"' + thumbnailUrl + '\")'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (title) {\r\n\t\t\t\tindicator.title = title;\r\n\t\t\t}\r\n\t\t\treturn indicator;\r\n\t\t},\r\n\r\n\t\taddIndicator: function (index) {\r\n\t\t\tif (this.indicatorContainer.length) {\r\n\t\t\t\tvar indicator = this.createIndicator(this.list[index])\r\n\t\t\t\tindicator.setAttribute('data-index', index)\r\n\t\t\t\tthis.indicatorContainer[0].appendChild(indicator)\r\n\t\t\t\tthis.indicators.push(indicator)\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsetActiveIndicator: function (index) {\r\n\t\t\tif (this.indicators) {\r\n\t\t\t\tif (this.activeIndicator) {\r\n\t\t\t\t\tthis.activeIndicator.removeClass(this.options.activeIndicatorClass)\r\n\t\t\t\t}\r\n\t\t\t\tthis.activeIndicator = $(this.indicators[index])\r\n\t\t\t\tthis.activeIndicator.addClass(this.options.activeIndicatorClass)\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinitSlides: function (reload) {\r\n\t\t\tif (!reload) {\r\n\t\t\t\tthis.indicatorContainer = this.container.find(\r\n\t\t\t\t\tthis.options.indicatorContainer\r\n\t\t\t\t)\r\n\t\t\t\tif (this.indicatorContainer.length) {\r\n\t\t\t\t\tthis.indicatorPrototype = document.createElement('li')\r\n\t\t\t\t\tthis.indicators = this.indicatorContainer[0].children\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.overrided(reload);\r\n\t\t},\r\n\r\n\t\taddSlide: function (index) {\r\n\t\t\tthis.overrided(index);\r\n\t\t\tthis.addIndicator(index)\r\n\t\t},\r\n\r\n\t\tresetSlides: function () {\r\n\t\t\tthis.overrided();\r\n\t\t\tthis.indicatorContainer.empty();\r\n\t\t\tthis.indicators = [];\r\n\t\t},\r\n\r\n\t\thandleClick: function (event) {\r\n\t\t\tvar target = event.target || event.srcElement\r\n\t\t\tvar parent = target.parentNode\r\n\t\t\tif (parent === this.indicatorContainer[0]) {\r\n\t\t\t\t// Click on indicator element\r\n\t\t\t\tthis.preventDefault(event)\r\n\t\t\t\tthis.slide(this.getNodeIndex(target))\r\n\t\t\t} else if (parent.parentNode === this.indicatorContainer[0]) {\r\n\t\t\t\t// Click on indicator child element\r\n\t\t\t\tthis.preventDefault(event)\r\n\t\t\t\tthis.slide(this.getNodeIndex(parent))\r\n\t\t\t} else {\r\n\t\t\t\treturn this.overrided(event)\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\thandleSlide: function (index) {\r\n\t\t\tthis.overrided(index)\r\n\t\t\tthis.setActiveIndicator(index)\r\n\t\t},\r\n\r\n\t\thandleClose: function () {\r\n\t\t\tif (this.activeIndicator) {\r\n\t\t\t\tthis.activeIndicator.removeClass(this.options.activeIndicatorClass)\r\n\t\t\t}\r\n\t\t\tthis.overrided();\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tGallery.installAddon(\"views\", {\r\n\t\t\"name\": \"lightbox\",\r\n\t\t\"ctor\": LightBoxView,\r\n\t\t\"templates\": {\r\n\t\t\t\"default\": '<div class=\"slides\"></div>' +\r\n\t\t\t\t'<h3 class=\"title\"></h3>' +\r\n\t\t\t\t'<a class=\"prev\"></a>' +\r\n\t\t\t\t'<a class=\"next\"></a>' +\r\n\t\t\t\t'<a class=\"close\"></a>' +\r\n\t\t\t\t'<ol class=\"indicator\"></ol>'\r\n\t\t}\r\n\t});\r\n\r\n\treturn LightBoxView;\r\n\r\n});\ndefine('skylark-blueimp-gallery2/main',[\r\n    \"./Gallery\",\r\n    \"./helper\",\r\n    \"./items/image\",\r\n    \"./items/video\",\r\n    \"./items/vimeo\",\r\n    \"./items/youtube\",\r\n    \"./views/SliderView\",\r\n    \"./views/CarouselView\",\r\n    \"./views/LightBoxView\"\r\n], function (Gallery) {\r\n    return Gallery;\r\n});\ndefine('skylark-blueimp-gallery2', ['skylark-blueimp-gallery2/main'], function (main) { return main; });\n\n"]}